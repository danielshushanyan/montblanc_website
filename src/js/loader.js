$(function () {
	window.loaderAnimation = new TimelineMax({paused: true,onComplete: onEnd});

	loaderAnimation
		.to('.loader__spinner',0.5,{
			opacity: 0,
			ease: Power1.easeInOut
		})
		.to('.loader__number',0.5,{
			opacity: 0,
			ease: Power1.easeInOut,
			onComplete: cloudsEnd
		},'-=0.5')
		.to('.header__logo-icon',0.5,{
			opacity: 0,
			ease: Power1.easeInOut
		},'-=0.5')
		.to('.header', 0.5,{
			y: 29,
			top: 0,
			ease: Power1.easeInOut
		})
		.to('.header__logo-icon',0.5,{
			height: '69px',
			maxHeight: '133px',
			width: '106px',
			ease: Power1.easeInOut,
		},'-=0.5')
		.to('.loader__cloud--white',0.5,{
			opacity: 0,
			ease: Power1.easeInOut
		},'-=0.5')
		.to('.loader__cloud--oc',1.5,{
			scale: 5,
			opacity: 0,
			ease: Power1.easeInOut,
		},'-=0.5')
		.to('.loader__cloud--tr',2,{
			xPercent: 100,
			opacity: 0,
			ease: Power1.easeInOut
		},'-=1.5')
		.to('.loader__cloud--br',2,{
			xPercent: 100,
			opacity: 0,
			ease: Power1.easeInOut
		},'-=2')
		.to('.loader__cloud--cl',2,{
			xPercent: -100,
			opacity: 0,
			ease: Power1.easeInOut
		},'-=2')
		.fromTo('#view',1,{scale: 1.2},{scale: 1,ease: Power1.easeInOut},'-=2')
		.to('.hide, .header__logo-icon',0.5,{
			opacity: 1,
			ease: Power1.easeInOut
		},'-=1');

	function cloudsEnd() {
		setInitialLocation();
		$('.header').removeClass('header--loader').addClass('header--top');
	}

	function onEnd() {
		$('.hide').removeClass('hide');
		$('.loader').remove();
		$('#view').css({'transform': ''})
	}
});
